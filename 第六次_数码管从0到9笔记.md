# 51单片机-数码管从0到9

## 数码管简介

数码管由八个二极管组成，其线路如下：

![数码管](https://pic4.zhimg.com/80/v2-09635c2b29799d1972e59ab405c9902b_1440w.webp)

本项目采用的是共阳极7段数码管，当寄存器给对应段加上低电平时，对应二极管就会发光，组成想要的字符。

## 硬件设置

在`P2`寄存器依次接上八个限流电阻后再接上八个数码管接口，最后给数码管接上`VCC`电源。

## 代码实现

要实现隔一秒换一个数字，则需要一个延时代码：

```C
void Delay(unsigned int xms){
	unsigned char i,j;
	while(xms--){
		i = 2;
		j = 239;
		do{
			while(--j);
		}while(--i);
	}
}
```

按照数码管排布，分别写出0-9的显示模式：

```C
P2 = 0xC0;//0 1100 0000
P2 = 0xF9;//1 1111 1001
P2 = 0xA4;//2 1010 0100
P2 = 0xB0;//3 1011 0000
P2 = 0x99;//4 1001 1001
P2 = 0x92;//5 1001 0010
P2 = 0x82;//6 1000 0010
P2 = 0xF8;//7 1111 1000
P2 = 0x80;//8 1000 0000
P2 = 0x90;//9 1001 0000
```

完整代码：

```C
#include "REG51.h"

void Delay(unsigned int xms){
	unsigned char i,j;
	while(xms--){
		i = 2;
		j = 239;
		do{
			while(--j);
		}while(--i);
	}
}

int main(){
	while(1){
		P2 = 0xC0;//0
		Delay(1000);
		P2 = 0xF9;//1
		Delay(1000);
		P2 = 0xA4;//2
		Delay(1000);
		P2 = 0xB0;//3
		Delay(1000);
		P2 = 0x99;//4
		Delay(1000);
		P2 = 0x92;//5
		Delay(1000);
		P2 = 0x82;//6
		Delay(1000);
		P2 = 0xF8;//7
		Delay(1000);
		P2 = 0x80;//8
		Delay(1000);
		P2 = 0x90;//9
		Delay(1000);
	}
}
```

